{
  // Use IntelliSense to learn about possible attributes.
  // Hover to view descriptions of existing attributes.
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
  
    {
      "name": "Launch Chrome against localhost",
      "request": "launch",
      "type": "chrome",
      "url": "http://localhost:4000",
      "webRoot": "${workspaceFolder}/nerfstudio/viewer/app"
    },
    {
      "name": "Python: Attach using Process ID",
      "type": "python",
      "request": "attach",
      "processId": "${command:pickProcess}",
      "justMyCode": false
    },
    {
      "name": "Python: Current File",
      "type": "python",
      "request": "launch",
      "program": "${file}",
      "console": "integratedTerminal",
      "justMyCode": false
    },
    {
      "name": "Python: NeuRAD",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": true,
      "args": [
        "neurad",
        "--pipeline.model.eval_num_rays_per_chunk=2048",
        "--pipeline.datamanager.num_processes=0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch=1280",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.train_num_rays_per_batch=4096",
        "--pipeline.datamanager.eval_num_rays_per_batch=4096",
        "pandaset-data",
        "--data=~/dev/datasets/pandaset",
        "--dataset_end_fraction=0.2",
        "--cameras=front",
      ]
    },
    {
      "name": "Python: NeuRAD tiny",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": true,
      "args": [
        "neurad",
        "--pipeline.model.eval_num_rays_per_chunk=2048",
        "--pipeline.model.field.grid.static.hashgrid_dim=2",
        "--pipeline.model.field.grid.static.num_levels=4",
        "--pipeline.model.field.grid.static.log2_hashmap_size=15",
        "--pipeline.model.field.grid.actor.hashgrid_dim=2",
        "--pipeline.model.field.grid.actor.num_levels=2",
        "--pipeline.model.field.grid.actor.log2_hashmap_size=11",
        "--pipeline.datamanager.num_processes=0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch=1280",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.train-num-rays-per_batch=2048",
        "--pipeline.datamanager.eval-num-rays_per_batch=2048",
        "pandaset-data",
        "--data=./data/pandaset",
        "--dataset_end_fraction=0.2",
        "--cameras=front",
      ]
    },
    {
      "name": "Python: NeuRAD CPU",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {"PYTORCH_ENABLE_MPS_FALLBACK": "1"},
      "args": [
        "neurad",
        "--pipeline.model.eval_num_rays_per_chunk=2048",
        "--pipeline.model.implementation=torch",
        "--pipeline.model.sampling.proposal_field_1.grid.actor.use_4d_hashgrid=False",
        "--pipeline.model.sampling.proposal_field_2.grid.actor.use_4d_hashgrid=False",
        "--pipeline.model.field.grid.actor.use_4d_hashgrid=False",
        "--machine.device-type=mps",
        "--mixed_precision=False",
        "--pipeline.datamanager.num_processes=0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.train_num_rays_per_batch=4096",
        "--pipeline.datamanager.eval_num_rays_per_batch=4096",
        "--vis=tensorboard",
        "pandaset-data",
        "--data=./data/pandaset",
        "--dataset_end_fraction=0.2",
        "--cameras=front",
      ]
    },
    {
      "name": "Python: diffusion-nerf",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train-diffusion-nerf.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "diffusion-nerf",
        "--vis=tensorboard",
        "--pipeline.diffusion-config-path=configs/diffusion_model_configs.yml",
        "--pipeline.model.eval_num_rays_per_chunk=2048",
        "--pipeline.datamanager.num_processes=0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch=1280",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.train_num_rays_per_batch=16384",
        "--pipeline.datamanager.eval_num_rays_per_batch=16384",
        "--pipeline.datamanager.num_processes=0",
        "pandaset-data",
        "--data", "./data/pandaset",
        "--cameras", "front",
        "--sequence", "001"
      ]
    },
    {
      "name": "Python: diffusion-nerf tiny",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "diffusion-nerf",
        "--vis=tensorboard",
        "--pipeline.diffusion_model.type", "sd",
        "--pipeline.diffusion_model.dtype", "fp16",
        "--pipeline.diffusion_model.lora_weights", "outputs/finetune/sd/0/final_weights",
        "--pipeline.diffusion_model.conditioning_signals", "ray",
        //"--pipeline.nerf_checkpoint", "outputs/imaginedriving/imaginedriving-001-331982-1/imaginedriving/2024-05-25_130744/nerfstudio_models/step-000020000.ckpt",
        "--pipeline.augment_phase_step", "0",
        "--pipeline.model.eval_num_rays_per_chunk", "2048",
        "--pipeline.model.field.grid.static.hashgrid_dim", "2",
        "--pipeline.model.field.grid.static.num_levels", "4",
        "--pipeline.model.field.grid.static.log2_hashmap_size", "15",
        "--pipeline.model.field.grid.actor.hashgrid_dim", "2",
        "--pipeline.model.field.grid.actor.num_levels", "2",
        "--pipeline.model.field.grid.actor.log2_hashmap_size", "11",
        "--pipeline.datamanager.num_processes", "0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch", "1280",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch", "128",
        "--pipeline.datamanager.train-num-rays-per_batch", "16384",
        "--pipeline.datamanager.eval-num-rays_per_batch", "16384",
        "pandaset-data",
        "--data", "./data/pandaset",
        "--cameras", "front",
        "--sequence", "001"
      ]
    },
    {
    "name": "Python: diffusion-nerf arg",
    "type": "python",
    "request": "launch",
    "program": "nerfstudio/scripts/train-diffusion-nerf.py",
    "console": "integratedTerminal",
    "justMyCode": false,
    "args": [
      "--method", "diffusion-nerf",
    ]
  },
    {
      "name": "Python: diffusion-nerf local-checkpoint",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train-diffusion-nerf.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "diffusion-nerf",
        "--vis=tensorboard",
        "--pipeline.diffusion_model.low_mem_mode", "True",
        "--pipeline.diffusion_model.compile_model", "False",
        "--pipeline.diffusion_model.dtype", "fp16",
        "--pipeline.diffusion_model.lora_weights", "/home/gasparyanartur/dev/outputs/finetune/331982/finetune/final_weights/pytorch_lora_weights.safetensors",
        "--pipeline.augment_strategy", "partial_const",
        "--pipeline.augment_phase_step", "0",
        "--pipeline.nerf_checkpoint", "/home/gasparyanartur/dev/outputs/imaginedriving/imaginedriving-001-331982-1/imaginedriving/2024-05-25_130744/nerfstudio_models/step-000020000.ckpt",
        "--pipeline.datamanager.num_processes", "0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch", "1280",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch", "128",
        "--pipeline.datamanager.train-num-rays-per_batch", "16384",
        "--pipeline.datamanager.eval-num-rays_per_batch", "16384",
        "pandaset-data",
        "--data", "./data/pandaset",
        "--cameras", "front",
        "--sequence", "001"
      ]
    },
    {
      "name": "Python: diffusion-nerf train help",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train-diffusion-nerf.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "imaginedriving",
        "--help"
      ]
    },
    
    {
      "name": "Python: neurad render help",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/render.py",
      "console": "integratedTerminal",
      "justMyCode": true,
      "args": [
        "dataset",
        "--help"
      ]
    },
    {
      "name": "Python: neurad render",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/render.py",
      "console": "integratedTerminal",
      "justMyCode": true,
      "args": [
        "dataset",
        "--load-config=./nerfstudio/scripts/config.yml", 
        "--data=/home/s0001899/dev/pandaset",
        "--config-output-dir=/home/s0001899/dev/neurad_output/2024-05-23_091132/",
      ]
    },


    {
      "name": "Python: ImagineDriving CPU",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {"PYTORCH_ENABLE_MPS_FALLBACK": "1"},
      "args": [
        "imaginedriving",
        "--pipeline.model.eval_num_rays_per_chunk=2048",
        "--pipeline.model.implementation=torch",
        "--pipeline.model.sampling.proposal_field_1.grid.actor.use_4d_hashgrid=False",
        "--pipeline.model.sampling.proposal_field_2.grid.actor.use_4d_hashgrid=False",
        "--pipeline.model.field.grid.actor.use_4d_hashgrid=False",
        "--machine.device-type=mps",
        "--mixed_precision=False",
        "--pipeline.datamanager.num_processes=0",
        "--pipeline.datamanager.train-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.eval-num-lidar-rays-per-batch=128",
        "--pipeline.datamanager.train_num_rays_per_batch=16384",
        "--pipeline.datamanager.eval_num_rays_per_batch=16384",
        "--vis=tensorboard",
        "pandaset-data",
        "--data=./data/pandaset",
        "--dataset_end_fraction=0.2",
        "--cameras=front",
        "--pipeline.diffusion-config-path=configs/mock_model_configs.yml"
      ]
    },
    {
      "name": "Python: Splatfacto PandaSet",
      "type": "python",
      "request": "launch",
      "program": "nerfstudio/scripts/train.py",
      "console": "integratedTerminal",
      "justMyCode": true,
      "args": [
        "splatfacto",
        "pandaset-data",
        "--sequence=028",
        "--data=./data/pandaset",
        "--dataset_end_fraction=1.0",
      ]
    },
    {
      "name": "Python: train controlnet pandaset local debug",
      "type": "debugpy",
      "request": "launch",
      "program": "nerfstudio/scripts/run_train_lora.py",
      "env": {
          "PYTHONPATH":"${workspaceFolder}",
      },
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "args": "configs/local-configs/train-controlnet-pandaset-local-debug.yml"
    },
    {
        "name": "Python: train diffusion pandaset local debug",
        "type": "debugpy",
        "request": "launch",
        "program": "nerfstudio/scripts/run_train_lora.py",
        "env": {
            "PYTHONPATH":"${workspaceFolder}",
        },
        "cwd": "${workspaceFolder}",
        "console": "integratedTerminal",
        "args": "configs/local-configs/train-diffusion-pandaset-local-debug.yml"
    },
    {
      "name": "Python: train sd pandaset",
      "type": "debugpy",
      "request": "launch",
      "program": "nerfstudio/scripts/run_train_lora.py",
      "env": {
          "PYTHONPATH":"${workspaceFolder}",
          "LORA_TRAIN_CONFIG": "configs/local-configs/train-sd-pandaset.yml"
      },
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "args": [
        "--diffusion_config.lora_base_ranks", "{\"controlnet\": 8, \"unet\": 8}"
      ]
    },
    {
      "name": "Python: train cn pandaset",
      "type": "debugpy",
      "request": "launch",
      "program": "nerfstudio/scripts/run_train_lora.py",
      "env": {
          "PYTHONPATH":"${workspaceFolder}",
          "LORA_TRAIN_CONFIG": "configs/local-configs/train-cn-pandaset.yml"
      },
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
    },
  ]
}
